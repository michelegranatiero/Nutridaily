<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Index</title>
  <!-- Bootstrap -->
  <link rel="stylesheet" type="text/css" href="./bootstrap/css/bootstrap.css" />
  <!--   <script type="application/javascript" src="./bootstrap/js/bootstrap.js"></script> -->
  <!-- JQuery -->
  <script src="//code.jquery.com/jquery-3.6.0.js"></script>
  <!-- style css -->
  <link rel="stylesheet" type="text/css" href="style.css" />
  <!-- google fonts -->
  <link rel="stylesheet"
    href="https://fonts.sandbox.google.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />



</head>

<body>
  <!-- navbar -->
  <header>
    <nav class="navbar navbar-expand-sm navbar-light bg-light shadow fixed-top rounding">
      <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center fw-bold fs-3 nav-text-color" href="#">
          <img src="./assets/nutrilogo.png" width="55px" class="d-inline-block">
          Nutridaily
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span> <!-- cambiare -->
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-sm-auto d-flex align-items-baseline">
            <li class="nav-item">
              <span class="fs-6 fw-bold nav-text-color">Benvenuto, Tizio</span>
            </li>
            <li class="nav-item ms-sm-5">
              <a class="nav-link active fs-5 nav-text-color" href="#">Esci</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <main class="container">
    <!-- Diario Alimentare Titolo-->
    <div class="row align-self-start">
      <h2 class="">Diario Alimentare</h2>
    </div>
    <!-- Contenitore Principale -->
    <div class="row cont1">
      <!-- header tabella -->
      <div class="row">
        <div class="col calendar-header text-color fs-5">
          <!-- Data:&nbsp -->
          <input type="date" id="calendario">
        </div>
        <div class="col">
          Carboidrati
        </div>
        <div class="col">
          Proteine
        </div>
        <div class="col">
          Grassi
        </div>
        <div class="col">
          Calorie
        </div>
      </div>
      <!-- colazione -->

      <!-- tabella -->
      <div class="w-100 accordion" id="accordionMeals">
        <div class="accordion-item">
          <div class="accordion-header d-flex" id="Colazione">
            <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal"
              onclick="vistaPasto()">
              +
            </button>
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
              aria-expanded="true" aria-controls="collapseOne">
              <span>Colazione</span>
            </button>
          </div>
          <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="Colazione"
            data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <!-- tabella alimenti colazione -->
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <div class="accordion-header d-flex" id="Pranzo">
            <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal"
              onclick="vistaPasto()">
              +
            </button>
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
              <span>Pranzo</span>
            </button>
          </div>
          <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="Pranzo"
            data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <!-- tabella alimenti pranzo -->
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <div class="accordion-header d-flex" id="Cena">
            <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal"
              onclick="vistaPasto()">
              +
            </button>
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
              <span>Cena</span>
            </button>
          </div>
          <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="Cena"
            data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <!-- tabella alimenti cena -->
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <div class="accordion-header d-flex" id="Spuntini">
            <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal"
              onclick="vistaPasto()">
              +
            </button>
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
              <span>Spuntini</span>
            </button>
          </div>
          <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="Spuntini"
            data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <!-- tabella alimenti spuntini -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!--Modale-->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel"></h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            Cerca un alimento: <input type="text" placeholder="Inserisci un alimento" id="searchText">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-success" data-bs-dismiss="modal">Chiudi</button>
            <button type="button" class="btn btn-success" id="save-button">Salva</button>
          </div>
        </div>
      </div>
    </div>













  </main>


  <!-- eventi alimenti pasti-->
  <script>

    var tbody;
    var count = 0;
    function vistaPasto() {
      tbody = event.composedPath()[1];
      document.getElementById("exampleModalLabel").innerHTML = tbody.id;

    }

    $("#save-button").click(function () {
      var alimento = document.getElementById('searchText').value;
      if (alimento != '') {
        count += 1;
        let template1 = `<div id='riga${count.toString()}'>
                            <td>
                                <span>
                                    <button type="button" onclick="remove_tr('riga${count.toString()}')" class="button-remove">-</button>
                                </span>
                                ${alimento}
                            </td>
                            <td>CarboidratiAlim</td>
                            <td>ProteineAlim</td>
                            <td>GrassiAlim</td>
                            <td>CalorieAlim</td>
                          </div>`;

        tbody.innerHTML += template1;
      }
      else {
        alert('Inserisci un alimento')
      }
    })

    function remove_tr(id_riga) {
      let riga = document.getElementById(id_riga);
      riga.remove();
    }
  </script>


  <!-- calendar deny future dates -->
  <script>

    var todayDate = new Date();
    var month = todayDate.getMonth() + 1; //04 - current month
    var year = todayDate.getFullYear(); //2021 - current year
    var tdate = todayDate.getDate(); // 27 - current date 
    if (month < 10) {
      month = "0" + month //'0' + 4 = 04
    }
    if (tdate < 10) {
      tdate = "0" + tdate;
    }
    var maxDate = year + "-" + month + "-" + tdate;
    $(document).ready(function () {
      $("#calendario").attr("max", maxDate);
      $("#calendario").attr("value", maxDate);
    });

  </script>

  <!-- bootstrap js -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
    </script>

</body>

</html>